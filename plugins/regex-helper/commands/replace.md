# replace - 置換パターン作成支援

正規表現を使った文字列置換のパターンを作成するコマンドです。

## 実行時の動作

### ステップ1: 置換の説明

```
どのような置換をしたいですか？

以下のいずれかの方法で説明してください:

1. 変換前と変換後の例を示す
   例: "2024/01/15" → "2024-01-15"

2. やりたいことを説明する
   例: "日付のスラッシュをハイフンに変えたい"

3. 変換前の文字列とルールを説明する
   例: "電話番号からハイフンを削除したい"
```

### ステップ2: パターンの生成

入力に基づいて検索パターンと置換パターンを生成:

```
分析結果:
日付のフォーマット変換（スラッシュ → ハイフン）

検索パターン: /(\d{4})\/(\d{2})\/(\d{2})/g
置換パターン: $1-$2-$3

変換例:
"2024/01/15" → "2024-01-15"
"記録日: 2024/12/31" → "記録日: 2024-12-31"
```

### ステップ3: コード例の提示

```
コード例:

// JavaScript
const text = "2024/01/15";
const result = text.replace(/(\d{4})\/(\d{2})\/(\d{2})/g, "$1-$2-$3");
// → "2024-01-15"

// Python
import re
text = "2024/01/15"
result = re.sub(r'(\d{4})/(\d{2})/(\d{2})', r'\1-\2-\3', text)
# → "2024-01-15"
```

### ステップ4: テスト

```
テスト文字列を入力してください（省略可）:
```

## 置換パターンの解説

### キャプチャグループの参照

```
$1, $2, $3...   JavaScript/Perl
\1, \2, \3...   Python/sed
${1}, ${2}...   一部の環境
```

### よくある置換パターン

#### フォーマット変換
```
日付: YYYY/MM/DD → YYYY-MM-DD
検索: /(\d{4})\/(\d{2})\/(\d{2})/g
置換: $1-$2-$3
```

#### 順序の入れ替え
```
名前: 姓 名 → 名 姓
検索: /(\S+)\s+(\S+)/
置換: $2 $1
```

#### 削除
```
HTMLタグの削除
検索: /<[^>]+>/g
置換: （空文字）
```

#### 追加・囲み
```
数値をカッコで囲む
検索: /(\d+)/g
置換: ($1)
```

#### 大文字/小文字変換（言語依存）
```
JavaScript: 関数を使う
text.replace(/\b\w/g, c => c.toUpperCase())
```

## 複雑な置換の対話例

```
User: 電話番号を統一したい。
      090-1234-5678 も 09012345678 も (090)1234-5678 も
      すべて 090-1234-5678 の形式にしたい

Claude: 複数のパターンを処理する必要がありますね。

        ステップ1: まず数字だけを抽出
        検索: /\D/g
        置換: ""
        結果: "09012345678"

        ステップ2: 統一フォーマットに変換
        検索: /(\d{3})(\d{4})(\d{4})/
        置換: $1-$2-$3
        結果: "090-1234-5678"

        または1つの正規表現で:
        検索: /\(?(\d{3})\)?-?(\d{4})-?(\d{4})/
        置換: $1-$2-$3
```
